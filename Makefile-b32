# Makefile for lg library

.autodepend
.cacheautodepend

BCCROOT = D:\BCC

IMPLIB = $(BCCROOT)\bin\Implib
ILINK32 = $(BCCROOT)\bin\ILink32
TLIB = $(BCCROOT)\bin\TLib
BRC32 = $(BCCROOT)\bin\Brc32
TASM32 = $(BCCROOT)\bin\Tasm32
CC = $(BCCROOT)\bin\BCC32

srcdir = .

DEFINES = -DWINVER=0x0400 -D_WIN32_WINNT=0x0400 -DWIN32_LEAN_AND_MEAN

LDFLAGS = -Tpd -c
LIBDIRS = -L.;$(BCCROOT)\lib;$(BCCROOT)\lib\psdk
LIBS = ole32.lib oleaut32.lib uuid.lib
INCLUDES = -I. -I$(srcdir)
CXXFLAGS =  -q -P -VM -VF -tWD 
RCFLAGS = -r

!ifdef DEBUG
CXXDEBUG = -v -y -O0 -DDEBUG
LDDEBUG = -v
!else
CXXDEBUG = -O2 -5 -OS -v- -DNDEBUG
LDDEBUG = -v-
!endif

LG_LIB = lg.lib
LG_SRCS = lg.cpp scrmsgs.cpp iids.cpp
LG_OBJS = lg.obj scrmsgs.obj iids.obj

.cpp.obj:
	$(CC) $(CXXFLAGS) $(CXXDEBUG) $(DEFINES) -c $<

ALL:	$(LG_LIB)

clean:
	del /q $(LG_OBJS)

$(LG_LIB): $(LG_OBJS)
	del /q $(LG_LIB)
	$(TLIB) /a $@ $?


